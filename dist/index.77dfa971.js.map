{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-fe9f9afbdef2cd9a.js","src/js/config.js","src/js/helpers.js","src/js/views/View.js","src/js/views/recipeView.js","src/js/model.js","src/js/views/searchView.js","src/js/views/resultsView.js","src/js/views/paginationView.js","src/js/views/bookmarksView.js","src/js/views/addRecipeView.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-0f87813b8aee5391.js","src/js/app.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"d7QkR\\\":\\\"index.77dfa971.js\\\",\\\"cvv7P\\\":\\\"icons.9801e6f1.svg\\\"}\"));","export const API_URL = `https://forkify-api.herokuapp.com/api/v2/recipes/`;\r\nexport const API_KEY = 'fd3e258e-09c6-46ef-b730-be8727b6c219';\r\nexport const TIMEOUT_SEC = 10;\r\nexport const RES_PER_PAGE = 10;\r\nexport const MODAL_CLOSE_SEC = 2.5;\r\n","import { TIMEOUT_SEC } from './config.js';\r\nconst timeout = function (s) {\r\n  return new Promise(function (_, reject) {\r\n    setTimeout(function () {\r\n      reject(new Error(`Request took too long! Timeout after ${s} second`));\r\n    }, s * 1000);\r\n  });\r\n};\r\n\r\nexport const AJAX = async function (url, uploadData = undefined) {\r\n  try {\r\n    const fetchPromise = uploadData\r\n      ? fetch(url, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(uploadData),\r\n        })\r\n      : fetch(url);\r\n    const res = await Promise.race([fetchPromise, timeout(TIMEOUT_SEC)]);\r\n    const data = await res.json();\r\n    if (!res.ok) throw new Error(`${data.message} (${res.status})`);\r\n    return data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\n// export const getJSON = async function (url) {\r\n//   try {\r\n//     const fetchPromise = fetch(url);\r\n//     const res = await Promise.race([fetchPromise, timeout(TIMEOUT_SEC)]);\r\n//     const data = await res.json();\r\n//     if (!res.ok) throw new Error(`${data.message} (${res.status})`);\r\n//     return data;\r\n//   } catch (err) {\r\n//     throw err;\r\n//   }\r\n// };\r\n\r\n// export const sendJSON = async function (url, uploadData) {\r\n//   try {\r\n//     const fetchPromise = fetch(url, {\r\n//       method: 'POST',\r\n//       headers: {\r\n//         'Content-Type': 'application/json',\r\n//       },\r\n//       body: JSON.stringify(uploadData),\r\n//     });\r\n//     const res = await Promise.race([fetchPromise, timeout(TIMEOUT_SEC)]);\r\n//     const data = await res.json();\r\n//     if (!res.ok) throw new Error(`${data.message} (${res.status})`);\r\n//     return data;\r\n//   } catch (err) {\r\n//     throw err;\r\n//   }\r\n// };\r\n","export default class View {\r\n  iconURL = `./src/img/icons.svg`;\r\n  _data;\r\n  /**\r\n   *\r\n   * @param {*} data\r\n   * @returns\r\n   */\r\n  render(data) {\r\n    if (!data || (Array.isArray(data) && data.length === 0))\r\n      return this.renderError();\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\r\n  }\r\n\r\n  //   update(data) {\r\n  //     if (!data || (Array.isArray(data) && data.length === 0))\r\n  //       return this.renderError();\r\n  //     this._data = data;\r\n  //     const newMarkup = this._generateMarkup();\r\n\r\n  //     const newDOM = document.createRange().createContextualFragment(newMarkup);\r\n  //     const newElements = Array.from(newDOM.querySelectorAll('*'));\r\n  //     const curElements = Array.from(this._parentElement.querySelectorAll('*'));\r\n  //     newElements.forEach((newEl, i) => {\r\n  //       const curEl = curEl[i];\r\n  //       if (\r\n  //         !newEl.isEqualNode(curEl) &&\r\n  //         newEl.firstChild.nodeValue.trim() !== ''\r\n  //       ) {\r\n  //         curEl.textContent = newEl.textContent;\r\n  //       }\r\n  //     });\r\n  //   }\r\n\r\n  _clear() {\r\n    this._parentElement.innerHTML = '';\r\n  }\r\n\r\n  renderSpinner = function () {\r\n    const markup = `\r\n        <div class=\"spinner\">\r\n          <svg>\r\n          <use href=\"${this.iconURL}#icon-loader\"></use>\r\n          </svg>\r\n        </div> `;\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\r\n  };\r\n\r\n  renderError(message = this._errorMessage) {\r\n    const markup = `\r\n      <div class=\"error\">\r\n        <div>\r\n          <svg>\r\n            <use href=\"${this.iconURL}#icon-alert-triangle\"></use>\r\n          </svg>\r\n        </div>\r\n        <p>${message}</p>\r\n      </div> `;\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\r\n  }\r\n\r\n  renderMessage(message = this._message) {\r\n    const markup = `\r\n      <div class=\"message\">\r\n      <div>\r\n        <svg>\r\n          <use href=\"${this.iconURL}#icon-smile\"></use>\r\n        </svg>\r\n      </div>\r\n      <p>${message}</p>`;\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML('afterbegin', markup);\r\n  }\r\n}\r\n","// const iconURL = `./src/img/icons.svg`;\r\n// import Fraction from 'fractional';\r\n// const Fraction = require('fractional');\r\n// console.log(Fraction);\r\nimport View from './View.js';\r\nclass RecipeView extends View {\r\n  _parentElement = document.querySelector('.recipe');\r\n  _errorMessage = 'We could not find that recipe. Please try another one';\r\n  _message = '';\r\n\r\n  addHandlerRender(handler) {\r\n    ['hashchange', 'load'].forEach(ev => window.addEventListener(ev, handler));\r\n  }\r\n\r\n  addHandlerUpdateServings(handler) {\r\n    this._parentElement.addEventListener('click', function (e) {\r\n      const btn = e.target.closest('.btn--update-servings');\r\n      if (!btn) return;\r\n      const { updateTo } = btn.dataset;\r\n      if (+updateTo <= 0) return;\r\n      handler(+updateTo);\r\n    });\r\n  }\r\n\r\n  addHandlerAddBookmark(handler) {\r\n    //controlAddBookmark\r\n    this._parentElement.addEventListener('click', function (e) {\r\n      const btn = e.target.closest('.btn--bookmark');\r\n      if (!btn) return;\r\n      handler();\r\n    });\r\n  }\r\n\r\n  _generateMarkup() {\r\n    return `\r\n    <figure class=\"recipe__fig\">\r\n      <img src=\"${this._data.image}\" alt=\"${\r\n      this._data.title\r\n    }\" class=\"recipe__img\" />\r\n      <h1 class=\"recipe__title\">\r\n        <span>${this._data.title}</span>\r\n      </h1>\r\n    </figure>\r\n\r\n    <div class=\"recipe__details\">\r\n      <div class=\"recipe__info\">\r\n        <svg class=\"recipe__info-icon\">\r\n          <use href=\"${this.iconURL}#icon-clock\"></use>\r\n        </svg>\r\n        <span class=\"recipe__info-data recipe__info-data--minutes\">${\r\n          this._data.cookingTime\r\n        }</span>\r\n        <span class=\"recipe__info-text\">minutes</span>\r\n      </div>\r\n      <div class=\"recipe__info\">\r\n        <svg class=\"recipe__info-icon\">\r\n          <use href=\"${this.iconURL}#icon-users\"></use>\r\n        </svg>\r\n        <span class=\"recipe__info-data recipe__info-data--people\">${\r\n          this._data.servings\r\n        }</span>\r\n        <span class=\"recipe__info-text\">servings</span>\r\n\r\n        <div class=\"recipe__info-buttons\">\r\n          <button class=\"btn--tiny btn--update-servings\" data-update-to='${\r\n            this._data.servings - 1\r\n          }'>\r\n            <svg>\r\n              <use href=\"${this.iconURL}#icon-minus-circle\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"btn--tiny btn--update-servings\" data-update-to='${\r\n            this._data.servings + 1\r\n          }'>\r\n            <svg>\r\n              <use href=\"${this.iconURL}#icon-plus-circle\"></use>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"recipe__user-generated ${this._data.key ? '' : 'hidden'}\">\r\n        <svg>\r\n          <use href=\"${this.iconURL}#icon-user\"></use>\r\n        </svg>\r\n      </div>\r\n      <button class=\"btn--round btn--bookmark\">\r\n        <svg class=\"\">\r\n          <use href=\"${this.iconURL}#icon-bookmark${\r\n      this._data.bookmarked ? '-fill' : ''\r\n    }\"></use>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    <div class=\"recipe__ingredients\">\r\n  <h2 class=\"heading--2\">Recipe ingredients</h2>\r\n  <ul class=\"recipe__ingredient-list\">\r\n${this._data.ingredients\r\n  .map(ing => {\r\n    return `\r\n    <li class=\"recipe__ingredient\">\r\n      <svg class=\"recipe__icon\">\r\n        <use href=\"${this.iconURL}#icon-check\"></use>\r\n      </svg>\r\n      <div class=\"recipe__quantity\">${ing.quantity}</div>\r\n      <div class=\"recipe__description\">\r\n        <span class=\"recipe__unit\">${ing.unit}</span>\r\n        ${ing.description}\r\n      </div>\r\n    </li>`;\r\n  })\r\n  .join('')}\r\n    </div>\r\n\r\n\r\n    <div class=\"recipe__directions\">\r\n      <h2 class=\"heading--2\">How to cook it</h2>\r\n      <p class=\"recipe__directions-text\">\r\n        This recipe was carefully designed and tested by\r\n        <span class=\"recipe__publisher\">${\r\n          this._data.publisher\r\n        }</span>. Please check out\r\n        directions at their website.\r\n      </p>\r\n      <a\r\n        class=\"btn--small recipe__btn\"\r\n        href=\"http://thepioneerwoman.com/cooking/pasta-with-tomato-cream-sauce/\"\r\n        target=\"_blank\"\r\n      >\r\n        <span>Directions</span>\r\n        <svg class=\"search__icon\">\r\n          <use href=\"${this.iconURL}#icon-arrow-right\"></use>\r\n        </svg>\r\n      </a>\r\n    </div>\r\n    `;\r\n  }\r\n}\r\nexport default new RecipeView();\r\n","import { API_URL, RES_PER_PAGE, API_KEY } from './config.js';\r\n// import { getJSON, sendJSON } from './helpers.js';\r\nimport { AJAX } from './helpers.js';\r\nimport recipeView from './views/recipeView.js';\r\nconst state = {\r\n  recipe: {},\r\n  search: {\r\n    query: '',\r\n    results: [],\r\n    page: 1,\r\n    resultsPerPage: RES_PER_PAGE,\r\n  },\r\n  bookmarks: [],\r\n};\r\n\r\nconst createRecipeObject = function (data) {\r\n  const { recipe } = data.data;\r\n  return {\r\n    id: recipe.id,\r\n    title: recipe.title,\r\n    publisher: recipe.publisher,\r\n    sourceUrl: recipe.source_url,\r\n    image: recipe.image_url,\r\n    servings: recipe.servings,\r\n    cookingTime: recipe.cooking_time,\r\n    ingredients: recipe.ingredients,\r\n    ...(recipe.key && { key: recipe.key }),\r\n  };\r\n};\r\n\r\nconst loadRecipe = async function (id) {\r\n  try {\r\n    const data = await AJAX(`${API_URL}${id}?key=${API_KEY}`);\r\n    state.recipe = createRecipeObject(data);\r\n    if (state.bookmarks.some(bookmark => bookmark.id === id))\r\n      state.recipe.bookmarked = true;\r\n    else state.recipe.bookmarked = false;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\nconst loadSearchResults = async function (query) {\r\n  try {\r\n    state.search.query = query;\r\n    const data = await AJAX(`${API_URL}?search=${query}&key=${API_KEY}`);\r\n    state.search.results = data.data.recipes.map(rec => {\r\n      return {\r\n        id: rec.id,\r\n        title: rec.title,\r\n        publisher: rec.publisher,\r\n        image: rec.image_url,\r\n        ...(rec.key && { key: rec.key }),\r\n      };\r\n    });\r\n    state.search.page = 1;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nconst getSearchResultsPage = function (page = state.search.page) {\r\n  state.search.page = page;\r\n  const start = (page - 1) * state.search.resultsPerPage; //0;\r\n  const end = page * state.search.resultsPerPage; //9;\r\n  return state.search.results.slice(start, end);\r\n};\r\n\r\nconst updateServings = function (newServings) {\r\n  state.recipe.ingredients.forEach(ing => {\r\n    ing.quantity = (ing.quantity * newServings) / state.recipe.servings;\r\n    // newQt = oldQt * newServings / oldServings\r\n  });\r\n\r\n  state.recipe.servings = newServings;\r\n};\r\nconst persistBookmarks = function () {\r\n  localStorage.setItem('bookmarks', JSON.stringify(state.bookmarks));\r\n};\r\nconst addBookmark = function (recipe) {\r\n  //Add bookmark\r\n  state.bookmarks.push(recipe);\r\n\r\n  //Mark current recipe as bookmark\r\n  if (recipe.id === state.recipe.id) state.recipe.bookmarked = true;\r\n\r\n  persistBookmarks();\r\n};\r\n\r\nconst deleteBookmark = function (id) {\r\n  const index = state.bookmarks.findIndex(el => el.id === id);\r\n  state.bookmarks.splice(index, 1);\r\n  if (id === state.recipe.id) state.recipe.bookmarked = false;\r\n\r\n  persistBookmarks();\r\n};\r\n\r\nconst init = function () {\r\n  const storage = localStorage.getItem('bookmarks');\r\n  if (storage) state.bookmarks = JSON.parse(storage);\r\n};\r\ninit();\r\n\r\nconst uploadRecipe = async function (newRecipe) {\r\n  try {\r\n    const ingredients = Object.entries(newRecipe)\r\n      .filter(entry => entry[0].startsWith('ingredient') && entry[1] !== '')\r\n      .map(ing => {\r\n        const ingArray = ing[1].replaceAll(' ', '').split(',');\r\n        if (ingArray.length !== 3) throw new Error('Wrong ingredient format!');\r\n        const [quantity, unit, description] = ingArray;\r\n\r\n        return { quantity: quantity ? +quantity : null, unit, description };\r\n      });\r\n    const recipe = {\r\n      title: newRecipe.title,\r\n      source_url: newRecipe.sourceUrl,\r\n      image_url: newRecipe.image,\r\n      publisher: newRecipe.publisher,\r\n      cooking_time: +newRecipe.cookingTime,\r\n      servings: +newRecipe.servings,\r\n      ingredients,\r\n    };\r\n\r\n    const data = await AJAX(`${API_URL}?key=${API_KEY}`, recipe);\r\n    state.recipe = createRecipeObject(data);\r\n    addBookmark(state.recipe);\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\n// loadSearchResults('pizza');\r\nexport {\r\n  state,\r\n  loadRecipe,\r\n  loadSearchResults,\r\n  getSearchResultsPage,\r\n  updateServings,\r\n  addBookmark,\r\n  deleteBookmark,\r\n  uploadRecipe,\r\n};\r\n","import { state } from '../model.js';\r\nclass SearchView {\r\n  #parentEl = document.querySelector('.search');\r\n\r\n  getQuery() {\r\n    const query = this.#parentEl.querySelector('.search__field').value;\r\n    this.#clearInput();\r\n\r\n    return query;\r\n  }\r\n\r\n  #clearInput() {\r\n    this.#parentEl.querySelector('.search__field').value = '';\r\n  }\r\n\r\n  addHandlerSearch(handler) {\r\n    this.#parentEl.addEventListener('submit', function (e) {\r\n      e.preventDefault();\r\n      handler();\r\n    });\r\n  }\r\n}\r\nexport default new SearchView();\r\n","import View from './View.js';\r\nimport { state } from '../model.js';\r\nclass ResultsView extends View {\r\n    \r\n  _parentElement = document.querySelector('.results');\r\n  _errorMessage = 'No recipes found for your query. Please try again :)';\r\n  _message = '';\r\n  _generateMarkup() {\r\n      \r\n    return this._data.map(this._generateMarkupPreview).join('');\r\n  }\r\n  _generateMarkupPreview(result) {\r\n    return `\r\n    <li class=\"preview\">\r\n    <a class=\"preview__link\" href=\"#${result.id}\">\r\n      <figure class=\"preview__fig\">\r\n        <img src=\"${result.image}\" alt=\"${result.title}\" />\r\n      </figure>\r\n      <div class=\"preview__data\">\r\n        <h4 class=\"preview__title\">${result.title}</h4>\r\n        <p class=\"preview__publisher\">${result.publisher}</p>\r\n       \r\n      </div>\r\n    </a>\r\n  </li>\r\n      `;\r\n  }\r\n}\r\nexport default new ResultsView();\r\n","import View from './View.js';\r\n\r\nclass PaginationView extends View {\r\n  _parentElement = document.querySelector('.pagination');\r\n\r\n  addHandlerClick(handler) {\r\n    this._parentElement.addEventListener('click', function (e) {\r\n      const btn = e.target.closest('.btn--inline');\r\n      if (!btn) return;\r\n      const goToPage = +btn.dataset.goto;\r\n      handler(goToPage);\r\n    });\r\n  }\r\n  _generateMarkup() {\r\n    const currentPage = this._data.page;\r\n    const numPages = Math.ceil(\r\n      this._data.results.length / this._data.resultsPerPage\r\n    );\r\n    const prevButton = `\r\n    <button data-goto='${\r\n      currentPage - 1\r\n    }' class=\"btn--inline pagination__btn--prev\">\r\n        <svg class=\"search__icon\">\r\n            <use href=\"${this.iconURL}#icon-arrow-left\"></use>\r\n        </svg>\r\n        <span>Page ${currentPage - 1}</span>\r\n    </button>\r\n    `;\r\n    const nextButton = `\r\n    <button data-goto='${\r\n      currentPage + 1\r\n    }' class=\"btn--inline pagination__btn--next\">\r\n        <span>Page ${currentPage + 1}</span>\r\n        <svg class=\"search__icon\">\r\n            <use href=\"${this.iconURL}#icon-arrow-right\"></use>\r\n        </svg>\r\n    </button>\r\n    `;\r\n    // Page 1, and there are other pages\r\n    if (currentPage === 1 && numPages > 1) {\r\n      return nextButton;\r\n    }\r\n    //Last page\r\n    if (currentPage === numPages && numPages > 1) {\r\n      return prevButton;\r\n    }\r\n    //Other page\r\n    if (currentPage > 1 && currentPage < numPages) {\r\n      return `${prevButton}${nextButton}`;\r\n    }\r\n    //Page 1 and no other pages\r\n    return '';\r\n  }\r\n}\r\n\r\nexport default new PaginationView();\r\n","import View from './View.js';\r\nimport { state } from '../model.js';\r\nclass BookMarksView extends View {\r\n  _parentElement = document.querySelector('.bookmarks__list');\r\n  _errorMessage = 'No bookmarks yet. Find a nice recipe and bookmark it ;)';\r\n  _message = '';\r\n  _generateMarkup() {\r\n    return this._data.map(this._generateMarkupPreview).join('');\r\n  }\r\n  _generateMarkupPreview(result) {\r\n    return `\r\n    <li class=\"preview\">\r\n    <a class=\"preview__link\" href=\"#${result.id}\">\r\n      <figure class=\"preview__fig\">\r\n        <img src=\"${result.image}\" alt=\"${result.title}\" />\r\n      </figure>\r\n      <div class=\"preview__data\">\r\n        <h4 class=\"preview__title\">${result.title}</h4>\r\n        <p class=\"preview__publisher\">${result.publisher}</p>\r\n       \r\n      </div>\r\n    </a>\r\n  </li>\r\n      `;\r\n  }\r\n}\r\nexport default new BookMarksView();\r\n","import View from './View.js';\r\n\r\nclass AddRecipeView extends View {\r\n  _parentElement = document.querySelector('.upload');\r\n  _message = 'Recipe was successfully uploaded';\r\n  _window = document.querySelector('.add-recipe-window');\r\n  _overlay = document.querySelector('.overlay');\r\n  _btnOpen = document.querySelector('.nav__btn--add-recipe');\r\n  _btnClose = document.querySelector('.btn--close-modal');\r\n\r\n  constructor() {\r\n    super();\r\n    this._addHandlerShowWindow();\r\n    this._addHandlerHideWindow();\r\n  }\r\n  toggleWindow() {\r\n    this._overlay.classList.toggle('hidden');\r\n    this._window.classList.toggle('hidden');\r\n  }\r\n  _addHandlerShowWindow() {\r\n    this._btnOpen.addEventListener('click', this.toggleWindow.bind(this));\r\n  }\r\n  _addHandlerHideWindow() {\r\n    this._btnClose.addEventListener('click', this.toggleWindow.bind(this));\r\n    this._overlay.addEventListener('click', this.toggleWindow.bind(this));\r\n  }\r\n\r\n  addHandlerUpload(handler) {\r\n    this._parentElement.addEventListener('submit', function (e) {\r\n      e.preventDefault();\r\n      const dataArr = [...new FormData(this)];\r\n      const data = Object.fromEntries(dataArr);\r\n      handler(data);\r\n    });\r\n  }\r\n  _generateMarkup() {}\r\n}\r\n\r\nexport default new AddRecipeView();\r\n","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('d7QkR') + require('./helpers/bundle-manifest').resolve(\"cvv7P\");","// import '/node_modules/core-js/stable';\r\n// import '../../node_modules/core-js/stable';\r\n// import '../regenerator-runtime/runtime';\r\nimport * as model from './model.js';\r\nimport searchView from './views/searchView.js';\r\nimport recipeView from './views/recipeView.js';\r\nimport resultsView from './views/resultsView.js';\r\nimport paginationView from './views/paginationView.js';\r\nimport bookmarksView from './views/bookmarksView.js';\r\nimport addRecipeView from './views/addRecipeView.js';\r\nimport { MODAL_CLOSE_SEC } from './config.js';\r\nimport { iconURL } from '../img/icons.svg';\r\nconst recipeContainer = document.querySelector('.recipe');\r\n// const iconURL = `../img/icons.svg`;\r\n\r\n// https://forkify-api.herokuapp.com/v2\r\n\r\n///////////////////////////////////////\r\n\r\nconst controlRecipes = async function () {\r\n  try {\r\n    const id = window.location.hash.slice(1);\r\n    if (!id) return;\r\n    recipeView.renderSpinner();\r\n\r\n    bookmarksView.render(model.state.bookmarks);\r\n    await model.loadRecipe(id);\r\n\r\n    recipeView.render(model.state.recipe);\r\n  } catch (err) {\r\n    recipeView.renderError();\r\n  }\r\n};\r\n\r\nconst controlSearchResults = async function () {\r\n  try {\r\n    resultsView.renderSpinner();\r\n    // 1) Get search query\r\n    const query = searchView.getQuery();\r\n    if (!query) return;\r\n\r\n    // 2) Load search results\r\n    await model.loadSearchResults(query);\r\n    // searchView.clearInput();\r\n    resultsView.render(model.getSearchResultsPage());\r\n    //Render initial pageination btns\r\n    paginationView.render(model.state.search);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\nconst controlPagination = function (goToPage) {\r\n  resultsView.render(model.getSearchResultsPage(goToPage));\r\n  paginationView.render(model.state.search);\r\n};\r\n\r\nconst controlServings = function (newServings) {\r\n  //Update the recipe servings (in state)\r\n  model.updateServings(newServings);\r\n  //Update the view\r\n  recipeView.render(model.state.recipe);\r\n  // recipeView.update(model.state.recipe);\r\n};\r\n\r\nconst controlAddBookmark = function () {\r\n  // I) Add/Remove Bookmark\r\n  if (!model.state.recipe.bookmarked) model.addBookmark(model.state.recipe);\r\n  else model.deleteBookmark(model.state.recipe.id);\r\n  // II) Update recipe view\r\n  recipeView.render(model.state.recipe);\r\n  // III) Render bookmarks\r\n  bookmarksView.render(model.state.bookmarks);\r\n};\r\nconst controlAddRecipe = async function (newRecipe) {\r\n  try {\r\n    //Show loading spinner\r\n    addRecipeView.renderSpinner();\r\n    // console.log(newRecipe);\r\n    await model.uploadRecipe(newRecipe);\r\n    console.log(model.state.recipe);\r\n    // Render recipe\r\n    recipeView.render(model.state.recipe);\r\n    //Success message\r\n    addRecipeView.renderMessage();\r\n    // Render bookmark view\r\n    bookmarksView.render(model.state.bookmarks);\r\n    // Change ID in URL\r\n    window.history.pushState(null, '', `#${model.state.recipe.id}`);\r\n    // console.log(window.history);\r\n    //Close form window\r\n    setTimeout(function () {\r\n      addRecipeView.toggleWindow();\r\n    }, MODAL_CLOSE_SEC * 1000);\r\n  } catch (err) {\r\n    console.error(err, '🎇🎆🎆🎆🎈');\r\n    addRecipeView.renderError(err.message);\r\n  }\r\n};\r\n\r\nconst init = function () {\r\n  recipeView.addHandlerRender(controlRecipes);\r\n  recipeView.addHandlerUpdateServings(controlServings);\r\n  recipeView.addHandlerAddBookmark(controlAddBookmark);\r\n  searchView.addHandlerSearch(controlSearchResults);\r\n  paginationView.addHandlerClick(controlPagination);\r\n  addRecipeView.addHandlerUpload(controlAddRecipe);\r\n};\r\ninit();\r\n"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$14f4eefa9b31a4c9$export$2b3ff41fecbef7c8","async","url","uploadData","fetchPromise","fetch","method","headers","body","stringify","res","Promise","race","s","_","reject","setTimeout","data","json","ok","message","status","err","iconURL","_data","Array","isArray","this","renderError","markup","_generateMarkup","_clear","_parentElement","insertAdjacentHTML","innerHTML","renderSpinner","_errorMessage","$a817540b6c0a0605$export$2e2bcd8739ae039","document","querySelector","_message","addHandlerRender","handler","forEach","ev","window","addEventListener","addHandlerUpdateServings","handler1","e","btn","target","closest","updateTo","dataset","addHandlerAddBookmark","handler2","image","title","$8a418f4c2848ae4e$export$ca000e230c0caa3e","recipe","search","query","results","page","resultsPerPage","bookmarks","$8a418f4c2848ae4e$var$createRecipeObject","publisher","sourceUrl","source_url","image_url","servings","cookingTime","cooking_time","ingredients","key","$8a418f4c2848ae4e$export$8d7f79465139ab72","start","end","slice","$8a418f4c2848ae4e$var$persistBookmarks","localStorage","setItem","$8a418f4c2848ae4e$export$72009cc673d27d80","push","bookmarked","storage","getItem","$8a418f4c2848ae4e$var$init","$663b770fc0b80b70$export$2e2bcd8739ae039","parentEl","getQuery","value","clearInput","addHandlerSearch","preventDefault","map","_generateMarkupPreview","join","result","addHandlerClick","goToPage","goto","currentPage","numPages","Math","ceil","prevButton","nextButton","$518beab434109200$export$2e2bcd8739ae039","_window","_overlay","_btnOpen","_btnClose","super","_addHandlerShowWindow","_addHandlerHideWindow","toggleWindow","classList","toggle","bind","addHandlerUpload","dataArr","FormData","fromEntries","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","replace","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","getBundleURL","resolve","$664a9e8d27af1557$var$controlRecipes","location","hash","$1d609299482b9e85$export$2e2bcd8739ae039","$83ff904d6f3f0c15$export$2e2bcd8739ae039","render","some","bookmark","$8a418f4c2848ae4e$export$b96725c7a035d60b","$664a9e8d27af1557$var$controlSearchResults","$f93b4583f4b0dde1$export$2e2bcd8739ae039","recipes","rec","$8a418f4c2848ae4e$export$202b8e5cb363a0c4","$77f42efeb9958473$export$2e2bcd8739ae039","console","log","$664a9e8d27af1557$var$controlPagination","$664a9e8d27af1557$var$controlServings","newServings","ing","quantity","$8a418f4c2848ae4e$export$5e23f4642ecad5ea","$664a9e8d27af1557$var$controlAddBookmark","index","findIndex","el","splice","$8a418f4c2848ae4e$export$136048bcb9946c75","$664a9e8d27af1557$var$controlAddRecipe","newRecipe","entries","filter","entry","startsWith","ingArray","replaceAll","split","unit","description","$8a418f4c2848ae4e$export$d660c2254e74960d","renderMessage","history","pushState","$638a9a2b3a95d7a6$export$3ce8858248d89a69","error"],"version":3,"file":"index.77dfa971.js.map"}